{"remainingRequest":"C:\\Users\\Graham\\Desktop\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Graham\\Desktop\\frontend\\src\\views\\student\\QuestionList.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Graham\\Desktop\\frontend\\src\\views\\student\\QuestionList.vue","mtime":1620097894000},{"path":"C:\\Users\\Graham\\Desktop\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1621157932554},{"path":"C:\\Users\\Graham\\Desktop\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1621157932471},{"path":"C:\\Users\\Graham\\Desktop\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1621157932554},{"path":"C:\\Users\\Graham\\Desktop\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":1621157949579}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgQmFja0NhcmQgZnJvbSAnQC9jb21wb25lbnRzL2NvbW1vbi9CYWNrQ2FyZCc7DQppbXBvcnQgVW5pdFRpdGxlIGZyb20gJ0AvY29tcG9uZW50cy9jb21tb24vVW5pdFRpdGxlJzsNCmltcG9ydCBRdWVzdGlvblJvdyBmcm9tICdAL2NvbXBvbmVudHMvY29tbW9uL1F1ZXN0aW9uUm93JzsNCmltcG9ydCBDdXN0b21CdXR0b24gZnJvbSAnQC9jb21wb25lbnRzL2NvbW1vbi9DdXN0b21CdXR0b24nOw0KaW1wb3J0IHsgYXBpRXhlY3V0b3IgfSBmcm9tICdAL2FwaSc7DQppbXBvcnQgeyBtYXBBY3Rpb25zIH0gZnJvbSAndnVleCc7DQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgICBuYW1lOiAnUXVlc3Rpb25MaXN0JywNCiAgICBjb21wb25lbnRzOiB7IEJhY2tDYXJkLCBVbml0VGl0bGUsIFF1ZXN0aW9uUm93LCBDdXN0b21CdXR0b24gfSwNCiAgICBkYXRhKCkgew0KICAgICAgICByZXR1cm4gew0KICAgICAgICAgICAgaWQ6IDAsDQogICAgICAgICAgICB1bml0OiAnJywNCiAgICAgICAgICAgIHRpdGxlOiAnJywNCiAgICAgICAgICAgIHF1ZXN0aW9uczogW10sDQogICAgICAgICAgICBpc1NlbnQ6IGZhbHNlLA0KICAgICAgICAgICAgc2NvcmU6IDAsDQogICAgICAgICAgICBxdWVzdGlvbklkczogW10sDQogICAgICAgICAgICBmYWxzZUFuc3dlckNvdW50OiAwLA0KICAgICAgICB9Ow0KICAgIH0sDQogICAgY29tcHV0ZWQ6IHsNCiAgICAgICAgYW5zd2VyUmVxdWVzdCgpIHsNCiAgICAgICAgICAgIHJldHVybiB7DQogICAgICAgICAgICAgICAgdWlkOiB0aGlzLmlkLA0KICAgICAgICAgICAgICAgIHNjb3JlOiB0aGlzLnNjb3JlLA0KICAgICAgICAgICAgICAgIHFpZDogdGhpcy5xdWVzdGlvbklkcywNCiAgICAgICAgICAgICAgICBhbnM6IHRoaXMucXVlc3Rpb25zLm1hcCgocXVlc3Rpb24pID0+IHF1ZXN0aW9uLnN0dWRlbnRBbnN3ZXIpLA0KICAgICAgICAgICAgfTsNCiAgICAgICAgfSwNCiAgICAgICAgcG9wdXBPcHRpb25zKCkgew0KICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmFsc2VBbnN3ZXJDb3VudCA9PT0gMA0KICAgICAgICAgICAgICAgID8gew0KICAgICAgICAgICAgICAgICAgICAgIHBvcHVwVGV4dDogJ+aBreWWnOWFqOWwjScsDQogICAgICAgICAgICAgICAgICAgICAgaW1nU3JjOiAnL2ltZy9jb29sLnN2ZycsDQogICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgOiB7DQogICAgICAgICAgICAgICAgICAgICAgcG9wdXBUZXh0OiBg562U6Yyv5LqGICR7dGhpcy5mYWxzZUFuc3dlckNvdW50fSDpoYxgLA0KICAgICAgICAgICAgICAgICAgICAgIGltZ1NyYzogJy9pbWcvZGlzdHVyYi5zdmcnLA0KICAgICAgICAgICAgICAgICAgfTsNCiAgICAgICAgfSwNCiAgICB9LA0KICAgIG1ldGhvZHM6IHsNCiAgICAgICAgLi4ubWFwQWN0aW9ucyh7DQogICAgICAgICAgICBzaG93UG9wdXA6ICdwb3B1cC91cGRhdGVQb3B1cCcsDQogICAgICAgIH0pLA0KICAgICAgICBnb1RvKHBhdGgpIHsNCiAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHBhdGgpOw0KICAgICAgICB9LA0KICAgICAgICB1cGRhdGVWYWx1ZSh2YWx1ZSwgaW5kZXgpIHsNCiAgICAgICAgICAgIHRoaXMucXVlc3Rpb25zW2luZGV4XS5zdHVkZW50QW5zd2VyID0gdmFsdWU7DQogICAgICAgIH0sDQogICAgICAgIGNvdW50U2NvcmUocXVlc3Rpb25zKSB7DQogICAgICAgICAgICBjb25zdCB0b3RhbCA9IDEwMDsNCiAgICAgICAgICAgIGNvbnN0IHNjb3JlUGVyUXVlcyA9IHRvdGFsIC8gdGhpcy5xdWVzdGlvbnMubGVuZ3RoOw0KICAgICAgICAgICAgbGV0IGZhbHNlQW5zd2VyQ291bnQgPSAwLA0KICAgICAgICAgICAgICAgIHRlbXBTY29yZSA9IDA7DQoNCiAgICAgICAgICAgIHF1ZXN0aW9ucy5mb3JFYWNoKChxdWVzdGlvbikgPT4gew0KICAgICAgICAgICAgICAgIGlmIChxdWVzdGlvbi5hbnN3ZXIgPT09IHF1ZXN0aW9uLnN0dWRlbnRBbnN3ZXIpIHsNCiAgICAgICAgICAgICAgICAgICAgdGVtcFNjb3JlICs9IHNjb3JlUGVyUXVlczsNCiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICBmYWxzZUFuc3dlckNvdW50ICs9IDE7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgIHRoaXMuc2NvcmUgPSBNYXRoLmZsb29yKHRlbXBTY29yZSk7DQogICAgICAgICAgICB0aGlzLmZhbHNlQW5zd2VyQ291bnQgPSBmYWxzZUFuc3dlckNvdW50Ow0KICAgICAgICB9LA0KICAgICAgICBoaWRlQnV0dG9uKCkgew0KICAgICAgICAgICAgdGhpcy5pc1NlbnQgPSB0cnVlOw0KICAgICAgICB9LA0KICAgICAgICBzaG93QWxsQW5hbHlzaXMoKSB7DQogICAgICAgICAgICB0aGlzLnF1ZXN0aW9ucy5tYXAoKHF1ZXN0aW9uKSA9PiAocXVlc3Rpb24uc2hvd0FuYWx5c2lzID0gdHJ1ZSkpOw0KICAgICAgICB9LA0KICAgICAgICBhc3luYyBzZW5kKCkgew0KICAgICAgICAgICAgdGhpcy5jb3VudFNjb3JlKHRoaXMucXVlc3Rpb25zKTsNCiAgICAgICAgICAgIGF3YWl0IGFwaUV4ZWN1dG9yLnN1Ym1pdEFuc3dlcnModGhpcy5hbnN3ZXJSZXF1ZXN0KTsNCiAgICAgICAgICAgIHRoaXMuc2hvd1BvcHVwKHRoaXMucG9wdXBPcHRpb25zKTsNCiAgICAgICAgICAgIHRoaXMuaGlkZUJ1dHRvbigpOw0KICAgICAgICAgICAgdGhpcy5zaG93QWxsQW5hbHlzaXMoKTsNCiAgICAgICAgfSwNCiAgICAgICAgcmVzZXRRdWVzdGlvbnMocXVlc3Rpb25zKSB7DQogICAgICAgICAgICByZXR1cm4gcXVlc3Rpb25zLm1hcCgocXVlc3Rpb24pID0+IHsNCiAgICAgICAgICAgICAgICBjb25zdCBvcHRpb25zID0gWw0KICAgICAgICAgICAgICAgICAgICBgQSAke3F1ZXN0aW9uLm9wdGlvbkF9YCwNCiAgICAgICAgICAgICAgICAgICAgYEIgJHtxdWVzdGlvbi5vcHRpb25CfWAsDQogICAgICAgICAgICAgICAgICAgIGBDICR7cXVlc3Rpb24ub3B0aW9uQ31gLA0KICAgICAgICAgICAgICAgICAgICBgRCAke3F1ZXN0aW9uLm9wdGlvbkR9YCwNCiAgICAgICAgICAgICAgICBdOw0KICAgICAgICAgICAgICAgIHJldHVybiB7DQogICAgICAgICAgICAgICAgICAgIGlkOiBxdWVzdGlvbi5pZCwNCiAgICAgICAgICAgICAgICAgICAgYW5hbHlzaXM6IHF1ZXN0aW9uLmFuYWx5emUsDQogICAgICAgICAgICAgICAgICAgIHF1ZXN0aW9uOiBxdWVzdGlvbi5xdWVzdGlvbiwNCiAgICAgICAgICAgICAgICAgICAgYW5zd2VyOiBxdWVzdGlvbi5xdWVzdGlvbkFuc3dlciwNCiAgICAgICAgICAgICAgICAgICAgc3R1ZGVudEFuc3dlcjogcXVlc3Rpb24uc3R1ZGVudEFuc3dlciwNCiAgICAgICAgICAgICAgICAgICAgc2hvd0FuYWx5c2lzOiBxdWVzdGlvbi5zdHVkZW50QW5zd2VyID8gdHJ1ZSA6IGZhbHNlLA0KICAgICAgICAgICAgICAgICAgICBvcHRpb25zLA0KICAgICAgICAgICAgICAgIH07DQogICAgICAgICAgICB9KTsNCiAgICAgICAgfSwNCiAgICAgICAgZ2V0UXVlc3Rpb25JZHMocXVlc3Rpb25zKSB7DQogICAgICAgICAgICByZXR1cm4gcXVlc3Rpb25zLm1hcCgocXVlc3Rpb24pID0+IHF1ZXN0aW9uLmlkKTsNCiAgICAgICAgfSwNCiAgICAgICAgZ2V0SXNTZW50KHF1ZXN0aW9ucykgew0KICAgICAgICAgICAgcmV0dXJuIHF1ZXN0aW9uc1swXS5zdHVkZW50QW5zd2VyID8gdHJ1ZSA6IGZhbHNlOw0KICAgICAgICB9LA0KICAgIH0sDQogICAgYXN5bmMgbW91bnRlZCgpIHsNCiAgICAgICAgdGhpcy5pZCA9IHRoaXMuJHJvdXRlLnBhcmFtcy5pZDsNCg0KICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGFwaUV4ZWN1dG9yLmdldFF1ZXN0aW9ucyh0aGlzLmlkKTsNCiAgICAgICAgdGhpcy5xdWVzdGlvbnMgPSB0aGlzLnJlc2V0UXVlc3Rpb25zKHJlc3BvbnNlLnF1ZXN0aW9ucyk7DQogICAgICAgIHRoaXMucXVlc3Rpb25JZHMgPSB0aGlzLmdldFF1ZXN0aW9uSWRzKHRoaXMucXVlc3Rpb25zKTsNCiAgICAgICAgdGhpcy5pc1NlbnQgPSB0aGlzLmdldElzU2VudCh0aGlzLnF1ZXN0aW9ucyk7DQogICAgICAgIHRoaXMudW5pdCA9IGBVbml0ICR7dGhpcy4kcm91dGUucGFyYW1zLmlkfWA7DQogICAgICAgIHRoaXMudGl0bGUgPSByZXNwb25zZS5uYW1lOw0KICAgIH0sDQp9Ow0K"},{"version":3,"sources":["QuestionList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6CA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"QuestionList.vue","sourceRoot":"src/views/student","sourcesContent":["<template>\r\n    <back-card\r\n        class=\"mx-auto\"\r\n        action-text=\"返回課堂回答\"\r\n        @button-click=\"goTo('/student/course-list')\"\r\n    >\r\n        <div class=\"pa-14\">\r\n            <unit-title :unit=\"unit\" :title=\"title\"></unit-title>\r\n            <div>\r\n                <question-row\r\n                    v-for=\"(question, index) in questions\"\r\n                    :answer=\"question.studentAnswer\"\r\n                    :key=\"`question-${index}`\"\r\n                    :question=\"question.question\"\r\n                    :options=\"question.options\"\r\n                    @update-value=\"updateValue($event, index)\"\r\n                >\r\n                    <div\r\n                        v-if=\"question.showAnalysis\"\r\n                        class=\"primary lighten-1 pa-5\"\r\n                    >\r\n                        <span\r\n                            :class=\"[\r\n                                question.studentAnswer !== question.answer\r\n                                    ? 'warning--text'\r\n                                    : 'primary--text',\r\n                            ]\"\r\n                            class=\"font-weight-medium\"\r\n                        >\r\n                            {{ question.analysis }}\r\n                        </span>\r\n                    </div>\r\n                </question-row>\r\n            </div>\r\n            <custom-button\r\n                v-if=\"!isSent\"\r\n                text=\"送出回答\"\r\n                width=\"130\"\r\n                @click=\"send\"\r\n            ></custom-button>\r\n        </div>\r\n    </back-card>\r\n</template>\r\n\r\n<script>\r\nimport BackCard from '@/components/common/BackCard';\r\nimport UnitTitle from '@/components/common/UnitTitle';\r\nimport QuestionRow from '@/components/common/QuestionRow';\r\nimport CustomButton from '@/components/common/CustomButton';\r\nimport { apiExecutor } from '@/api';\r\nimport { mapActions } from 'vuex';\r\n\r\nexport default {\r\n    name: 'QuestionList',\r\n    components: { BackCard, UnitTitle, QuestionRow, CustomButton },\r\n    data() {\r\n        return {\r\n            id: 0,\r\n            unit: '',\r\n            title: '',\r\n            questions: [],\r\n            isSent: false,\r\n            score: 0,\r\n            questionIds: [],\r\n            falseAnswerCount: 0,\r\n        };\r\n    },\r\n    computed: {\r\n        answerRequest() {\r\n            return {\r\n                uid: this.id,\r\n                score: this.score,\r\n                qid: this.questionIds,\r\n                ans: this.questions.map((question) => question.studentAnswer),\r\n            };\r\n        },\r\n        popupOptions() {\r\n            return this.falseAnswerCount === 0\r\n                ? {\r\n                      popupText: '恭喜全對',\r\n                      imgSrc: '/img/cool.svg',\r\n                  }\r\n                : {\r\n                      popupText: `答錯了 ${this.falseAnswerCount} 題`,\r\n                      imgSrc: '/img/disturb.svg',\r\n                  };\r\n        },\r\n    },\r\n    methods: {\r\n        ...mapActions({\r\n            showPopup: 'popup/updatePopup',\r\n        }),\r\n        goTo(path) {\r\n            this.$router.push(path);\r\n        },\r\n        updateValue(value, index) {\r\n            this.questions[index].studentAnswer = value;\r\n        },\r\n        countScore(questions) {\r\n            const total = 100;\r\n            const scorePerQues = total / this.questions.length;\r\n            let falseAnswerCount = 0,\r\n                tempScore = 0;\r\n\r\n            questions.forEach((question) => {\r\n                if (question.answer === question.studentAnswer) {\r\n                    tempScore += scorePerQues;\r\n                } else {\r\n                    falseAnswerCount += 1;\r\n                }\r\n            });\r\n\r\n            this.score = Math.floor(tempScore);\r\n            this.falseAnswerCount = falseAnswerCount;\r\n        },\r\n        hideButton() {\r\n            this.isSent = true;\r\n        },\r\n        showAllAnalysis() {\r\n            this.questions.map((question) => (question.showAnalysis = true));\r\n        },\r\n        async send() {\r\n            this.countScore(this.questions);\r\n            await apiExecutor.submitAnswers(this.answerRequest);\r\n            this.showPopup(this.popupOptions);\r\n            this.hideButton();\r\n            this.showAllAnalysis();\r\n        },\r\n        resetQuestions(questions) {\r\n            return questions.map((question) => {\r\n                const options = [\r\n                    `A ${question.optionA}`,\r\n                    `B ${question.optionB}`,\r\n                    `C ${question.optionC}`,\r\n                    `D ${question.optionD}`,\r\n                ];\r\n                return {\r\n                    id: question.id,\r\n                    analysis: question.analyze,\r\n                    question: question.question,\r\n                    answer: question.questionAnswer,\r\n                    studentAnswer: question.studentAnswer,\r\n                    showAnalysis: question.studentAnswer ? true : false,\r\n                    options,\r\n                };\r\n            });\r\n        },\r\n        getQuestionIds(questions) {\r\n            return questions.map((question) => question.id);\r\n        },\r\n        getIsSent(questions) {\r\n            return questions[0].studentAnswer ? true : false;\r\n        },\r\n    },\r\n    async mounted() {\r\n        this.id = this.$route.params.id;\r\n\r\n        const response = await apiExecutor.getQuestions(this.id);\r\n        this.questions = this.resetQuestions(response.questions);\r\n        this.questionIds = this.getQuestionIds(this.questions);\r\n        this.isSent = this.getIsSent(this.questions);\r\n        this.unit = `Unit ${this.$route.params.id}`;\r\n        this.title = response.name;\r\n    },\r\n};\r\n</script>\r\n"]}]}