{"remainingRequest":"C:\\Users\\Graham\\Desktop\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Graham\\Desktop\\frontend\\src\\views\\teacher\\StudentDetail.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Graham\\Desktop\\frontend\\src\\views\\teacher\\StudentDetail.vue","mtime":1620097894000},{"path":"C:\\Users\\Graham\\Desktop\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1621157932554},{"path":"C:\\Users\\Graham\\Desktop\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1621157932471},{"path":"C:\\Users\\Graham\\Desktop\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1621157932554},{"path":"C:\\Users\\Graham\\Desktop\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":1621157949579}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgQmFja0NhcmQgZnJvbSAnQC9jb21wb25lbnRzL2NvbW1vbi9CYWNrQ2FyZCc7DQppbXBvcnQgQ3VzdG9tVGFibGUgZnJvbSAnQC9jb21wb25lbnRzL2NvbW1vbi9DdXN0b21UYWJsZSc7DQppbXBvcnQgU3R1ZGVudEluZm9Sb3cgZnJvbSAnQC9jb21wb25lbnRzL3RlYWNoZXIvU3R1ZGVudEluZm9Sb3cnOw0KaW1wb3J0IFNjb3JlTGluZUNoYXJ0IGZyb20gJ0AvY29tcG9uZW50cy9jaGFydC9TY29yZUxpbmVDaGFydCc7DQppbXBvcnQgeyBhcGlFeGVjdXRvciB9IGZyb20gJ0AvYXBpJzsNCg0KZXhwb3J0IGRlZmF1bHQgew0KICAgIG5hbWU6ICdTdHVkZW50RGV0YWlsJywNCiAgICBjb21wb25lbnRzOiB7IEJhY2tDYXJkLCBTY29yZUxpbmVDaGFydCwgU3R1ZGVudEluZm9Sb3csIEN1c3RvbVRhYmxlIH0sDQogICAgZGF0YSgpIHsNCiAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICAgIGluZm9zOiB7fSwNCiAgICAgICAgICAgIGF2ZXJhZ2U6IDAsDQogICAgICAgICAgICBjaGFydERhdGE6IHsNCiAgICAgICAgICAgICAgICBjb2x1bW5zOiBbJ3VuaXQnLCAnc2NvcmUnXSwNCiAgICAgICAgICAgICAgICByb3dzOiBbXSwNCiAgICAgICAgICAgIH0sDQogICAgICAgICAgICBoZWFkZXJzOiBbDQogICAgICAgICAgICAgICAgeyB0ZXh0OiAn5Zau5YWDJywgdmFsdWU6ICd1bml0Jywgc29ydGFibGU6IGZhbHNlIH0sDQogICAgICAgICAgICAgICAgeyB0ZXh0OiAn5Zau5YWD5ZCN56ixJywgdmFsdWU6ICd0aXRsZScsIHNvcnRhYmxlOiBmYWxzZSB9LA0KICAgICAgICAgICAgICAgIHsgdGV4dDogJ+WIhuaVuCcsIHZhbHVlOiAnc2NvcmUnLCBzb3J0YWJsZTogZmFsc2UgfSwNCiAgICAgICAgICAgIF0sDQogICAgICAgICAgICBzY29yZXM6IFtdLA0KICAgICAgICB9Ow0KICAgIH0sDQogICAgbWV0aG9kczogew0KICAgICAgICBnb1RvKHBhdGgpIHsNCiAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsgcGF0aCB9KTsNCiAgICAgICAgfSwNCiAgICAgICAgdHJhbnNmb3JtQ2hhcnREYXRhKHNjb3Jlcykgew0KICAgICAgICAgICAgY29uc3Qgc29ydGVkU2NvcmVzID0gc2NvcmVzLnNvcnQoKGEsIGIpID0+IHsNCiAgICAgICAgICAgICAgICByZXR1cm4gYS51bml0IC0gYi51bml0Ow0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgICByZXR1cm4gew0KICAgICAgICAgICAgICAgIC4uLnRoaXMuY2hhcnREYXRhLA0KICAgICAgICAgICAgICAgIHJvd3M6IHNvcnRlZFNjb3Jlcy5tYXAoKHVuaXRTY29yZSkgPT4gew0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gew0KICAgICAgICAgICAgICAgICAgICAgICAgdW5pdDogYFVuaXQgJHt1bml0U2NvcmUudW5pdH1gLA0KICAgICAgICAgICAgICAgICAgICAgICAgc2NvcmU6IHVuaXRTY29yZS5zY29yZSwNCiAgICAgICAgICAgICAgICAgICAgfTsNCiAgICAgICAgICAgICAgICB9KSwNCiAgICAgICAgICAgIH07DQogICAgICAgIH0sDQogICAgICAgIHNldFNjb3JlcyhzY29yZXMpIHsNCiAgICAgICAgICAgIHJldHVybiBzY29yZXMubWFwKChzY29yZSkgPT4gew0KICAgICAgICAgICAgICAgIHJldHVybiB7IC4uLnNjb3JlLCB1bml0OiBgVW5pdCAke3Njb3JlLnVuaXR9YCB9Ow0KICAgICAgICAgICAgfSk7DQogICAgICAgIH0sDQogICAgICAgIHNldFN0dWRlbnRJbmZvKGluZm9zKSB7DQogICAgICAgICAgICByZXR1cm4gew0KICAgICAgICAgICAgICAgIGlkOiBpbmZvcy5zdHVkZW50SUQsDQogICAgICAgICAgICAgICAgbmFtZTogaW5mb3Muc3R1ZGVudE5hbWUsDQogICAgICAgICAgICAgICAgZGVwYXJ0bWVudDogaW5mb3MuZGVwYXJ0bWVudCwNCiAgICAgICAgICAgICAgICBhdmVyYWdlOiBNYXRoLmZsb29yKGluZm9zLmF2ZXJhZ2UpLA0KICAgICAgICAgICAgfTsNCiAgICAgICAgfSwNCiAgICB9LA0KICAgIGFzeW5jIGNyZWF0ZWQoKSB7DQogICAgICAgIGNvbnN0IHN0dWRlbnRJZCA9IHRoaXMuJHJvdXRlLnBhcmFtcy5pZDsNCg0KICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGFwaUV4ZWN1dG9yLmdldFN0dWRlbnREZXRhaWwoc3R1ZGVudElkKTsNCiAgICAgICAgY29uc3Qgc2NvcmVzID0gcmVzcG9uc2Uuc2NvcmVzOw0KDQogICAgICAgIHRoaXMuY2hhcnREYXRhID0gdGhpcy50cmFuc2Zvcm1DaGFydERhdGEoc2NvcmVzKTsNCiAgICAgICAgdGhpcy5pbmZvcyA9IHRoaXMuc2V0U3R1ZGVudEluZm8ocmVzcG9uc2UpOw0KICAgICAgICB0aGlzLnNjb3JlcyA9IHRoaXMuc2V0U2NvcmVzKHNjb3Jlcyk7DQogICAgfSwNCn07DQo="},{"version":3,"sources":["StudentDetail.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAmBA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"StudentDetail.vue","sourceRoot":"src/views/teacher","sourcesContent":["<template>\r\n    <back-card\r\n        class=\"mt-16 mx-auto\"\r\n        action-text=\"返回學生列表\"\r\n        @button-click=\"goTo('/teacher/student-list')\"\r\n    >\r\n        <div class=\"px-10 pt-10\">\r\n            <student-info-row :infos=\"infos\"></student-info-row>\r\n        </div>\r\n        <div class=\"px-10\">\r\n            <score-line-chart :data=\"chartData\"></score-line-chart>\r\n        </div>\r\n        <div class=\"pb-10 px-10\">\r\n            <custom-table :headers=\"headers\" :items=\"scores\"></custom-table>\r\n        </div>\r\n    </back-card>\r\n</template>\r\n\r\n<script>\r\nimport BackCard from '@/components/common/BackCard';\r\nimport CustomTable from '@/components/common/CustomTable';\r\nimport StudentInfoRow from '@/components/teacher/StudentInfoRow';\r\nimport ScoreLineChart from '@/components/chart/ScoreLineChart';\r\nimport { apiExecutor } from '@/api';\r\n\r\nexport default {\r\n    name: 'StudentDetail',\r\n    components: { BackCard, ScoreLineChart, StudentInfoRow, CustomTable },\r\n    data() {\r\n        return {\r\n            infos: {},\r\n            average: 0,\r\n            chartData: {\r\n                columns: ['unit', 'score'],\r\n                rows: [],\r\n            },\r\n            headers: [\r\n                { text: '單元', value: 'unit', sortable: false },\r\n                { text: '單元名稱', value: 'title', sortable: false },\r\n                { text: '分數', value: 'score', sortable: false },\r\n            ],\r\n            scores: [],\r\n        };\r\n    },\r\n    methods: {\r\n        goTo(path) {\r\n            this.$router.push({ path });\r\n        },\r\n        transformChartData(scores) {\r\n            const sortedScores = scores.sort((a, b) => {\r\n                return a.unit - b.unit;\r\n            });\r\n            return {\r\n                ...this.chartData,\r\n                rows: sortedScores.map((unitScore) => {\r\n                    return {\r\n                        unit: `Unit ${unitScore.unit}`,\r\n                        score: unitScore.score,\r\n                    };\r\n                }),\r\n            };\r\n        },\r\n        setScores(scores) {\r\n            return scores.map((score) => {\r\n                return { ...score, unit: `Unit ${score.unit}` };\r\n            });\r\n        },\r\n        setStudentInfo(infos) {\r\n            return {\r\n                id: infos.studentID,\r\n                name: infos.studentName,\r\n                department: infos.department,\r\n                average: Math.floor(infos.average),\r\n            };\r\n        },\r\n    },\r\n    async created() {\r\n        const studentId = this.$route.params.id;\r\n\r\n        const response = await apiExecutor.getStudentDetail(studentId);\r\n        const scores = response.scores;\r\n\r\n        this.chartData = this.transformChartData(scores);\r\n        this.infos = this.setStudentInfo(response);\r\n        this.scores = this.setScores(scores);\r\n    },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped></style>\r\n"]}]}