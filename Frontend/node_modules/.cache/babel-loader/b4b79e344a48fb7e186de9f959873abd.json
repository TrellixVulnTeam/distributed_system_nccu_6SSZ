{"remainingRequest":"C:\\Users\\Graham\\Desktop\\frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Graham\\Desktop\\frontend\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Users\\Graham\\Desktop\\frontend\\src\\router\\permission.js","dependencies":[{"path":"C:\\Users\\Graham\\Desktop\\frontend\\src\\router\\permission.js","mtime":1620097894000},{"path":"C:\\Users\\Graham\\Desktop\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1621157932554},{"path":"C:\\Users\\Graham\\Desktop\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1621157932471},{"path":"C:\\Users\\Graham\\Desktop\\frontend\\node_modules\\eslint-loader\\index.js","mtime":1621157947701}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc3BsaXQiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZSI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICJDOi9Vc2Vycy9HcmFoYW0vRGVza3RvcC9mcm9udGVuZC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCByb3V0ZXIgZnJvbSAnLi9pbmRleCc7CmltcG9ydCBzdG9yZSBmcm9tICcuLi9zdG9yZSc7IC8vIGltcG9ydCB7IHRlYWNoZXJSb3V0ZXMsIHN0dWRlbnRSb3V0ZXMgfSBmcm9tICIuLi8uLi9yb3V0ZXIiOwoKdmFyIHJvdXRlckhvb2sgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogIHZhciBfcmVmID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKHRvLCBmcm9tLCBuZXh0KSB7CiAgICB2YXIgcm9sZSwgaGFzVG9rZW4sIHBhdGhSb2xlOwogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICByb2xlID0gc3RvcmUuc3RhdGUudXNlci5yb2xlOwogICAgICAgICAgICBoYXNUb2tlbiA9IHN0b3JlLnN0YXRlLnVzZXIudG9rZW47CgogICAgICAgICAgICBpZiAoaGFzVG9rZW4pIHsKICAgICAgICAgICAgICBpZiAocm9sZSkgewogICAgICAgICAgICAgICAgcGF0aFJvbGUgPSB0by5wYXRoLnNwbGl0KCcvJylbMV07CgogICAgICAgICAgICAgICAgaWYgKHRvLnBhdGggPT09ICcvbG9naW4nKSB7CiAgICAgICAgICAgICAgICAgIG5leHQoIi8iLmNvbmNhdChyb2xlKSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRvLnBhdGggPT09ICcvJykgewogICAgICAgICAgICAgICAgICBuZXh0KCIvIi5jb25jYXQocm9sZSkpOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChwYXRoUm9sZSAmJiByb2xlICE9PSBwYXRoUm9sZSkgewogICAgICAgICAgICAgICAgICBuZXh0KCIvIi5jb25jYXQocm9sZSkpOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgbmV4dCgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBuZXh0KCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIG5leHQoKTsKICAgICAgICAgICAgfQoKICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfY2FsbGVlKTsKICB9KSk7CgogIHJldHVybiBmdW5jdGlvbiByb3V0ZXJIb29rKF94LCBfeDIsIF94MykgewogICAgcmV0dXJuIF9yZWYuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICB9Owp9KCk7Cgpyb3V0ZXIuYmVmb3JlRWFjaChyb3V0ZXJIb29rKTs="},{"version":3,"sources":["C:/Users/Graham/Desktop/frontend/src/router/permission.js"],"names":["router","store","routerHook","to","from","next","role","state","user","hasToken","token","pathRole","path","split","beforeEach"],"mappings":";;;;AAAA,OAAOA,MAAP,MAAmB,SAAnB;AACA,OAAOC,KAAP,MAAkB,UAAlB,C,CACA;;AAEA,IAAMC,UAAU;AAAA,qEAAG,iBAAOC,EAAP,EAAWC,IAAX,EAAiBC,IAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AACTC,YAAAA,IADS,GACFL,KAAK,CAACM,KAAN,CAAYC,IAAZ,CAAiBF,IADf;AAETG,YAAAA,QAFS,GAEER,KAAK,CAACM,KAAN,CAAYC,IAAZ,CAAiBE,KAFnB;;AAIf,gBAAID,QAAJ,EAAc;AACV,kBAAIH,IAAJ,EAAU;AACAK,gBAAAA,QADA,GACWR,EAAE,CAACS,IAAH,CAAQC,KAAR,CAAc,GAAd,EAAmB,CAAnB,CADX;;AAGN,oBAAIV,EAAE,CAACS,IAAH,KAAY,QAAhB,EAA0B;AACtBP,kBAAAA,IAAI,YAAKC,IAAL,EAAJ;AACH,iBAFD,MAEO,IAAIH,EAAE,CAACS,IAAH,KAAY,GAAhB,EAAqB;AACxBP,kBAAAA,IAAI,YAAKC,IAAL,EAAJ;AACH,iBAFM,MAEA,IAAIK,QAAQ,IAAIL,IAAI,KAAKK,QAAzB,EAAmC;AACtCN,kBAAAA,IAAI,YAAKC,IAAL,EAAJ;AACH,iBAFM,MAEA;AACHD,kBAAAA,IAAI;AACP;AACJ,eAZD,MAYO;AACHA,gBAAAA,IAAI;AACP;AACJ,aAhBD,MAgBO;AACHA,cAAAA,IAAI;AACP;;AAtBc;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAAVH,UAAU;AAAA;AAAA;AAAA,GAAhB;;AAyBAF,MAAM,CAACc,UAAP,CAAkBZ,UAAlB","sourcesContent":["import router from './index';\r\nimport store from '../store';\r\n// import { teacherRoutes, studentRoutes } from \"../../router\";\r\n\r\nconst routerHook = async (to, from, next) => {\r\n    const role = store.state.user.role;\r\n    const hasToken = store.state.user.token;\r\n\r\n    if (hasToken) {\r\n        if (role) {\r\n            const pathRole = to.path.split('/')[1];\r\n\r\n            if (to.path === '/login') {\r\n                next(`/${role}`);\r\n            } else if (to.path === '/') {\r\n                next(`/${role}`);\r\n            } else if (pathRole && role !== pathRole) {\r\n                next(`/${role}`);\r\n            } else {\r\n                next();\r\n            }\r\n        } else {\r\n            next();\r\n        }\r\n    } else {\r\n        next();\r\n    }\r\n};\r\n\r\nrouter.beforeEach(routerHook);\r\n"]}]}