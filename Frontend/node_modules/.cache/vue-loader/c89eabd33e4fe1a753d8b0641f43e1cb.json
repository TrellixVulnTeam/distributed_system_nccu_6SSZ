{"remainingRequest":"C:\\Users\\Graham\\Desktop\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Graham\\Desktop\\frontend\\src\\views\\teacher\\QuestionManagement.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Graham\\Desktop\\frontend\\src\\views\\teacher\\QuestionManagement.vue","mtime":1620097894000},{"path":"C:\\Users\\Graham\\Desktop\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1621157932554},{"path":"C:\\Users\\Graham\\Desktop\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1621157932471},{"path":"C:\\Users\\Graham\\Desktop\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1621157932554},{"path":"C:\\Users\\Graham\\Desktop\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":1621157949579}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgQmFja0NhcmQgZnJvbSAnQC9jb21wb25lbnRzL2NvbW1vbi9CYWNrQ2FyZCc7DQppbXBvcnQgUXVlc3Rpb25Sb3cgZnJvbSAnQC9jb21wb25lbnRzL2NvbW1vbi9RdWVzdGlvblJvdyc7DQppbXBvcnQgQ3VzdG9tQnV0dG9uIGZyb20gJ0AvY29tcG9uZW50cy9jb21tb24vQ3VzdG9tQnV0dG9uJzsNCmltcG9ydCBVbml0VGl0bGUgZnJvbSAnQC9jb21wb25lbnRzL2NvbW1vbi9Vbml0VGl0bGUnOw0KaW1wb3J0IHsgYXBpRXhlY3V0b3IgfSBmcm9tICdAL2FwaSc7DQppbXBvcnQgeyBtYXBBY3Rpb25zIH0gZnJvbSAndnVleCc7DQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgICBuYW1lOiAnUXVlc3Rpb25NYW5hZ2VtZW50JywNCiAgICBjb21wb25lbnRzOiB7IEJhY2tDYXJkLCBVbml0VGl0bGUsIFF1ZXN0aW9uUm93LCBDdXN0b21CdXR0b24gfSwNCiAgICBkYXRhKCkgew0KICAgICAgICByZXR1cm4gew0KICAgICAgICAgICAgdW5pdDogJycsDQogICAgICAgICAgICB0aXRsZTogJycsDQogICAgICAgICAgICBpZDogMCwNCiAgICAgICAgICAgIGlzU2VudDogZmFsc2UsDQogICAgICAgICAgICBxdWVzdGlvbnM6IFtdLA0KICAgICAgICB9Ow0KICAgIH0sDQogICAgbWV0aG9kczogew0KICAgICAgICAuLi5tYXBBY3Rpb25zKHsNCiAgICAgICAgICAgIHVwZGF0ZVBvcHVwOiAncG9wdXAvdXBkYXRlUG9wdXAnLA0KICAgICAgICB9KSwNCiAgICAgICAgZ29UbyhwYXRoKSB7DQogICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaChwYXRoKTsNCiAgICAgICAgfSwNCiAgICAgICAgYXN5bmMgc2VuZCgpIHsNCiAgICAgICAgICAgIHRoaXMuaXNTZW50ID0gdHJ1ZTsNCiAgICAgICAgICAgIGF3YWl0IGFwaUV4ZWN1dG9yLnNldFF1ZXN0aW9uU2VudCh0aGlzLmlkKTsNCiAgICAgICAgICAgIHRoaXMudXBkYXRlUG9wdXAoew0KICAgICAgICAgICAgICAgIHBvcHVwVGV4dDogJ+mAgeWHuuaIkOWKnycsDQogICAgICAgICAgICAgICAgaW1nU3JjOiAnL2ltZy9zZWxlY3Rpb24uc3ZnJywNCiAgICAgICAgICAgIH0pOw0KICAgICAgICB9LA0KICAgICAgICByZXNldFF1ZXN0aW9ucyhxdWVzdGlvbnMpIHsNCiAgICAgICAgICAgIHJldHVybiBxdWVzdGlvbnMubWFwKChxdWVzdGlvbikgPT4gew0KICAgICAgICAgICAgICAgIGNvbnN0IG9wdGlvbnMgPSBbDQogICAgICAgICAgICAgICAgICAgIGBBICR7cXVlc3Rpb24ub3B0aW9uQX1gLA0KICAgICAgICAgICAgICAgICAgICBgQiAke3F1ZXN0aW9uLm9wdGlvbkJ9YCwNCiAgICAgICAgICAgICAgICAgICAgYEMgJHtxdWVzdGlvbi5vcHRpb25DfWAsDQogICAgICAgICAgICAgICAgICAgIGBEICR7cXVlc3Rpb24ub3B0aW9uRH1gLA0KICAgICAgICAgICAgICAgIF07DQogICAgICAgICAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICAgICAgICAgICAgaWQ6IHF1ZXN0aW9uLmlkLA0KICAgICAgICAgICAgICAgICAgICBhbmFseXNpczogcXVlc3Rpb24uYW5hbHl6ZSwNCiAgICAgICAgICAgICAgICAgICAgcXVlc3Rpb246IHF1ZXN0aW9uLnF1ZXN0aW9uLA0KICAgICAgICAgICAgICAgICAgICBhbnN3ZXI6IHF1ZXN0aW9uLnF1ZXN0aW9uQW5zd2VyLA0KICAgICAgICAgICAgICAgICAgICBzaG93QW5hbHlzaXM6IHRydWUsDQogICAgICAgICAgICAgICAgICAgIG9wdGlvbnMsDQogICAgICAgICAgICAgICAgfTsNCiAgICAgICAgICAgIH0pOw0KICAgICAgICB9LA0KICAgICAgICB0cmFuc2Zvcm1Cb29sZWFuKGJvb2xlYW4pIHsNCiAgICAgICAgICAgIHJldHVybiBib29sZWFuID09PSAxID8gdHJ1ZSA6IGZhbHNlOw0KICAgICAgICB9LA0KICAgIH0sDQogICAgYXN5bmMgbW91bnRlZCgpIHsNCiAgICAgICAgdGhpcy5pZCA9IHRoaXMuJHJvdXRlLnBhcmFtcy5pZDsNCg0KICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGFwaUV4ZWN1dG9yLmdldFF1ZXN0aW9ucyh0aGlzLmlkKTsNCiAgICAgICAgdGhpcy51bml0ID0gYFVuaXQgJHt0aGlzLiRyb3V0ZS5wYXJhbXMuaWR9YDsNCiAgICAgICAgdGhpcy50aXRsZSA9IHJlc3BvbnNlLm5hbWU7DQogICAgICAgIHRoaXMucXVlc3Rpb25zID0gdGhpcy5yZXNldFF1ZXN0aW9ucyhyZXNwb25zZS5xdWVzdGlvbnMpOw0KICAgICAgICB0aGlzLmlzU2VudCA9IHRoaXMudHJhbnNmb3JtQm9vbGVhbihyZXNwb25zZS5pc1NlbmQpOw0KICAgIH0sDQp9Ow0K"},{"version":3,"sources":["QuestionManagement.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwCA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"QuestionManagement.vue","sourceRoot":"src/views/teacher","sourcesContent":["<template>\r\n    <back-card\r\n        class=\"mt-16 mx-auto\"\r\n        action-text=\"返回課程管理\"\r\n        @button-click=\"goTo('/teacher/course-management')\"\r\n    >\r\n        <div class=\"pa-14\">\r\n            <unit-title :unit=\"unit\" :title=\"title\"></unit-title>\r\n            <div>\r\n                <question-row\r\n                    v-for=\"(question, index) in questions\"\r\n                    :readonly=\"true\"\r\n                    :key=\"`question-${index}`\"\r\n                    :question=\"question.question\"\r\n                    :options=\"question.options\"\r\n                    :answer=\"question.answer\"\r\n                >\r\n                    <div\r\n                        v-if=\"question.showAnalysis\"\r\n                        class=\"primary lighten-1 pa-5\"\r\n                    >\r\n                        <span class=\"warning--text font-weight-medium\">\r\n                            {{ question.analysis }}\r\n                        </span>\r\n                    </div>\r\n                </question-row>\r\n            </div>\r\n            <div class=\"d-flex justify-end\">\r\n                <custom-button\r\n                    v-if=\"!isSent\"\r\n                    text=\"送出問題\"\r\n                    width=\"130\"\r\n                    @click=\"send\"\r\n                ></custom-button>\r\n            </div>\r\n        </div>\r\n    </back-card>\r\n</template>\r\n\r\n<script>\r\nimport BackCard from '@/components/common/BackCard';\r\nimport QuestionRow from '@/components/common/QuestionRow';\r\nimport CustomButton from '@/components/common/CustomButton';\r\nimport UnitTitle from '@/components/common/UnitTitle';\r\nimport { apiExecutor } from '@/api';\r\nimport { mapActions } from 'vuex';\r\n\r\nexport default {\r\n    name: 'QuestionManagement',\r\n    components: { BackCard, UnitTitle, QuestionRow, CustomButton },\r\n    data() {\r\n        return {\r\n            unit: '',\r\n            title: '',\r\n            id: 0,\r\n            isSent: false,\r\n            questions: [],\r\n        };\r\n    },\r\n    methods: {\r\n        ...mapActions({\r\n            updatePopup: 'popup/updatePopup',\r\n        }),\r\n        goTo(path) {\r\n            this.$router.push(path);\r\n        },\r\n        async send() {\r\n            this.isSent = true;\r\n            await apiExecutor.setQuestionSent(this.id);\r\n            this.updatePopup({\r\n                popupText: '送出成功',\r\n                imgSrc: '/img/selection.svg',\r\n            });\r\n        },\r\n        resetQuestions(questions) {\r\n            return questions.map((question) => {\r\n                const options = [\r\n                    `A ${question.optionA}`,\r\n                    `B ${question.optionB}`,\r\n                    `C ${question.optionC}`,\r\n                    `D ${question.optionD}`,\r\n                ];\r\n                return {\r\n                    id: question.id,\r\n                    analysis: question.analyze,\r\n                    question: question.question,\r\n                    answer: question.questionAnswer,\r\n                    showAnalysis: true,\r\n                    options,\r\n                };\r\n            });\r\n        },\r\n        transformBoolean(boolean) {\r\n            return boolean === 1 ? true : false;\r\n        },\r\n    },\r\n    async mounted() {\r\n        this.id = this.$route.params.id;\r\n\r\n        const response = await apiExecutor.getQuestions(this.id);\r\n        this.unit = `Unit ${this.$route.params.id}`;\r\n        this.title = response.name;\r\n        this.questions = this.resetQuestions(response.questions);\r\n        this.isSent = this.transformBoolean(response.isSend);\r\n    },\r\n};\r\n</script>\r\n"]}]}