{"remainingRequest":"C:\\Users\\Graham\\Desktop\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Graham\\Desktop\\frontend\\src\\views\\teacher\\QuestionAnswers.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Graham\\Desktop\\frontend\\src\\views\\teacher\\QuestionAnswers.vue","mtime":1620097894000},{"path":"C:\\Users\\Graham\\Desktop\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1621157932554},{"path":"C:\\Users\\Graham\\Desktop\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1621157932471},{"path":"C:\\Users\\Graham\\Desktop\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1621157932554},{"path":"C:\\Users\\Graham\\Desktop\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":1621157949579}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgQmFja0NhcmQgZnJvbSAnQC9jb21wb25lbnRzL2NvbW1vbi9CYWNrQ2FyZCc7DQppbXBvcnQgVW5pdFRpdGxlIGZyb20gJ0AvY29tcG9uZW50cy9jb21tb24vVW5pdFRpdGxlJzsNCmltcG9ydCBTY29yZUhpc3RvZ3JhbSBmcm9tICdAL2NvbXBvbmVudHMvY2hhcnQvU2NvcmVIaXN0b2dyYW0nOw0KaW1wb3J0IFNjb3JlQmFyQ2hhcnQgZnJvbSAnQC9jb21wb25lbnRzL2NoYXJ0L1Njb3JlQmFyQ2hhcnQnOw0KaW1wb3J0IFF1ZXN0aW9uUm93IGZyb20gJ0AvY29tcG9uZW50cy9jb21tb24vUXVlc3Rpb25Sb3cnOw0KaW1wb3J0IHsgYXBpRXhlY3V0b3IgfSBmcm9tICdAL2FwaSc7DQoNCi8vIGltcG9ydCB7DQovLyAgICAgbW9ja1F1ZXN0aW9uUmVzdWx0cywNCi8vICAgICBtb2NrU3R1ZGVudFNjb3JlcywNCi8vIH0gZnJvbSAnLi4vLi4vZHVtbWllcy9zdW1tYXJ5RGF0YSc7DQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgICBuYW1lOiAnUXVlc3Rpb25BbnN3ZXJzJywNCiAgICBjb21wb25lbnRzOiB7DQogICAgICAgIEJhY2tDYXJkLA0KICAgICAgICBVbml0VGl0bGUsDQogICAgICAgIFNjb3JlSGlzdG9ncmFtLA0KICAgICAgICBTY29yZUJhckNoYXJ0LA0KICAgICAgICBRdWVzdGlvblJvdywNCiAgICB9LA0KICAgIGRhdGEoKSB7DQogICAgICAgIHJldHVybiB7DQogICAgICAgICAgICB0aXRsZTogJycsDQogICAgICAgICAgICB1bml0SWQ6IDAsDQogICAgICAgICAgICBvdmVyYWxsQ2hhcnREYXRhOiB7DQogICAgICAgICAgICAgICAgY29sdW1uczogWyduYW1lJywgJ3Njb3JlJ10sDQogICAgICAgICAgICAgICAgcm93czogW10sDQogICAgICAgICAgICB9LA0KICAgICAgICAgICAgcXVlc3Rpb25DaGFydERhdGFzOiBbXSwNCiAgICAgICAgICAgIHF1ZXN0aW9uczogW10sDQogICAgICAgIH07DQogICAgfSwNCiAgICBjb21wdXRlZDogew0KICAgICAgICB1bml0KCkgew0KICAgICAgICAgICAgcmV0dXJuIGBVbml0ICR7dGhpcy51bml0SWR9YDsNCiAgICAgICAgfSwNCiAgICB9LA0KICAgIG1ldGhvZHM6IHsNCiAgICAgICAgZ29UbyhwYXRoKSB7DQogICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7IHBhdGggfSk7DQogICAgICAgIH0sDQogICAgICAgIHJlc2V0UXVlc3Rpb24ocXVlc3Rpb24pIHsNCiAgICAgICAgICAgIGNvbnN0IG9wdGlvbnMgPSBbDQogICAgICAgICAgICAgICAgYEEgJHtxdWVzdGlvbi5vcHRpb25fYX1gLA0KICAgICAgICAgICAgICAgIGBCICR7cXVlc3Rpb24ub3B0aW9uX2J9YCwNCiAgICAgICAgICAgICAgICBgQyAke3F1ZXN0aW9uLm9wdGlvbl9jfWAsDQogICAgICAgICAgICAgICAgYEQgJHtxdWVzdGlvbi5vcHRpb25fZH1gLA0KICAgICAgICAgICAgXTsNCiAgICAgICAgICAgIGNvbnN0IGNvdW50QW5zd2VycyA9IHRoaXMuY291bnRBbnN3ZXJzKHF1ZXN0aW9uKTsNCiAgICAgICAgICAgIHJldHVybiB7DQogICAgICAgICAgICAgICAgcXVlc3Rpb246IHF1ZXN0aW9uLnF1ZXN0aW9uLA0KICAgICAgICAgICAgICAgIGFuc3dlcjogcXVlc3Rpb24uYW5zd2VyLA0KICAgICAgICAgICAgICAgIGNvdW50QW5zd2VycywNCiAgICAgICAgICAgICAgICBvcHRpb25zLA0KICAgICAgICAgICAgfTsNCiAgICAgICAgfSwNCiAgICAgICAgY291bnRBbnN3ZXJzKHF1ZXN0aW9uKSB7DQogICAgICAgICAgICBjb25zdCBhbnN3ZXJDb3VudCA9IHsNCiAgICAgICAgICAgICAgICBBOiB7IGNvdW50OiAwLCBzdHVkZW50czogW10gfSwNCiAgICAgICAgICAgICAgICBCOiB7IGNvdW50OiAwLCBzdHVkZW50czogW10gfSwNCiAgICAgICAgICAgICAgICBDOiB7IGNvdW50OiAwLCBzdHVkZW50czogW10gfSwNCiAgICAgICAgICAgICAgICBEOiB7IGNvdW50OiAwLCBzdHVkZW50czogW10gfSwNCiAgICAgICAgICAgIH07DQogICAgICAgICAgICBxdWVzdGlvbi5zdHVkZW50QW5zd2Vycy5mb3JFYWNoKChzdHVkZW50QW5zd2VyKSA9PiB7DQogICAgICAgICAgICAgICAgY29uc3Qgb3B0aW9uID0gc3R1ZGVudEFuc3dlci5zdHVkZW50T3B0aW9uOw0KICAgICAgICAgICAgICAgIGFuc3dlckNvdW50W29wdGlvbl0uY291bnQgKz0gMTsNCiAgICAgICAgICAgICAgICBhbnN3ZXJDb3VudFtvcHRpb25dLnN0dWRlbnRzLnB1c2goc3R1ZGVudEFuc3dlci5uYW1lKTsNCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgcmV0dXJuIGFuc3dlckNvdW50Ow0KICAgICAgICB9LA0KICAgICAgICBmb3JtYXRRdWVzdGlvbnMocXVlc3Rpb25zKSB7DQogICAgICAgICAgICByZXR1cm4gcXVlc3Rpb25zLm1hcCgocXVlc3Rpb24pID0+IHsNCiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5yZXNldFF1ZXN0aW9uKHF1ZXN0aW9uKTsNCiAgICAgICAgICAgIH0pOw0KICAgICAgICB9LA0KICAgICAgICBnZXRRdWVzdGlvblJvd3MocXVlc3Rpb25zKSB7DQogICAgICAgICAgICByZXR1cm4gcXVlc3Rpb25zLm1hcCgocXVlc3Rpb24pID0+IHsNCiAgICAgICAgICAgICAgICBjb25zdCBBID0gcXVlc3Rpb24uY291bnRBbnN3ZXJzWydBJ107DQogICAgICAgICAgICAgICAgY29uc3QgQiA9IHF1ZXN0aW9uLmNvdW50QW5zd2Vyc1snQiddOw0KICAgICAgICAgICAgICAgIGNvbnN0IEMgPSBxdWVzdGlvbi5jb3VudEFuc3dlcnNbJ0MnXTsNCiAgICAgICAgICAgICAgICBjb25zdCBEID0gcXVlc3Rpb24uY291bnRBbnN3ZXJzWydEJ107DQogICAgICAgICAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICAgICAgICAgICAgY29sdW1uczogWydvcHRpb24nLCAnY291bnQnLCAnc3R1ZGVudHMnXSwNCiAgICAgICAgICAgICAgICAgICAgcm93czogWw0KICAgICAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbjogJ0QnLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50OiBELmNvdW50LA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0dWRlbnRzOiBELnN0dWRlbnRzLmpvaW4oJ+OAgScpLA0KICAgICAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb246ICdDJywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3VudDogQy5jb3VudCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHVkZW50czogQy5zdHVkZW50cy5qb2luKCfjgIEnKSwNCiAgICAgICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uOiAnQicsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY291bnQ6IEIuY291bnQsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R1ZGVudHM6IEIuc3R1ZGVudHMuam9pbign44CBJyksDQogICAgICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbjogJ0EnLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50OiBBLmNvdW50LA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0dWRlbnRzOiBBLnN0dWRlbnRzLmpvaW4oJ+OAgScpLA0KICAgICAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgXSwNCiAgICAgICAgICAgICAgICB9Ow0KICAgICAgICAgICAgfSk7DQogICAgICAgIH0sDQogICAgfSwNCiAgICBhc3luYyBtb3VudGVkKCkgew0KICAgICAgICB0aGlzLnVuaXRJZCA9IHRoaXMuJHJvdXRlLnBhcmFtcy5pZDsNCg0KICAgICAgICBjb25zdCByZXN1bHRSZXMgPSBhd2FpdCBhcGlFeGVjdXRvci5nZXRRdWVzdGlvblJlc3VsdHModGhpcy51bml0SWQpOw0KICAgICAgICBjb25zdCBzdHVkZW50UmVzID0gYXdhaXQgYXBpRXhlY3V0b3IuZ2V0QWxsU3R1ZGVudFNjb3Jlcyh0aGlzLnVuaXRJZCk7DQoNCiAgICAgICAgdGhpcy5xdWVzdGlvbnMgPSB0aGlzLmZvcm1hdFF1ZXN0aW9ucyhyZXN1bHRSZXMucXVlc3Rpb25zKTsNCg0KICAgICAgICB0aGlzLnF1ZXN0aW9uQ2hhcnREYXRhcyA9IHRoaXMuZ2V0UXVlc3Rpb25Sb3dzKHRoaXMucXVlc3Rpb25zKTsNCiAgICAgICAgdGhpcy5vdmVyYWxsQ2hhcnREYXRhID0gew0KICAgICAgICAgICAgLi4udGhpcy5vdmVyYWxsQ2hhcnREYXRhLA0KICAgICAgICAgICAgcm93czogc3R1ZGVudFJlcywNCiAgICAgICAgfTsNCiAgICAgICAgdGhpcy50aXRsZSA9IHJlc3VsdFJlcy51bml0VGl0bGU7DQogICAgfSwNCn07DQo="},{"version":3,"sources":["QuestionAnswers.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkCA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"QuestionAnswers.vue","sourceRoot":"src/views/teacher","sourcesContent":["<template>\r\n    <back-card\r\n        class=\"mt-16 mx-auto\"\r\n        action-text=\"返回答題狀況\"\r\n        @button-click=\"goTo('/teacher/unit-overview')\"\r\n    >\r\n        <div class=\"pa-14\">\r\n            <unit-title :title=\"title\" :unit=\"unit\"></unit-title>\r\n            <div>\r\n                <score-histogram :data=\"overallChartData\"></score-histogram>\r\n            </div>\r\n            <div>\r\n                <h3 class=\"headline font-weight-medium mb-7\">各題狀況</h3>\r\n                <question-row\r\n                    v-for=\"(question, index) in questions\"\r\n                    :readonly=\"true\"\r\n                    :key=\"`question-${index}`\"\r\n                    :question=\"question.question\"\r\n                    :options=\"question.options\"\r\n                    :answer=\"question.answer\"\r\n                >\r\n                    <div class=\"mt-n10\">\r\n                        <score-bar-chart\r\n                            class=\"px-10\"\r\n                            :dataset=\"questionChartDatas[index]\"\r\n                        ></score-bar-chart>\r\n                    </div>\r\n                </question-row>\r\n            </div>\r\n        </div>\r\n    </back-card>\r\n</template>\r\n\r\n<script>\r\nimport BackCard from '@/components/common/BackCard';\r\nimport UnitTitle from '@/components/common/UnitTitle';\r\nimport ScoreHistogram from '@/components/chart/ScoreHistogram';\r\nimport ScoreBarChart from '@/components/chart/ScoreBarChart';\r\nimport QuestionRow from '@/components/common/QuestionRow';\r\nimport { apiExecutor } from '@/api';\r\n\r\n// import {\r\n//     mockQuestionResults,\r\n//     mockStudentScores,\r\n// } from '../../dummies/summaryData';\r\n\r\nexport default {\r\n    name: 'QuestionAnswers',\r\n    components: {\r\n        BackCard,\r\n        UnitTitle,\r\n        ScoreHistogram,\r\n        ScoreBarChart,\r\n        QuestionRow,\r\n    },\r\n    data() {\r\n        return {\r\n            title: '',\r\n            unitId: 0,\r\n            overallChartData: {\r\n                columns: ['name', 'score'],\r\n                rows: [],\r\n            },\r\n            questionChartDatas: [],\r\n            questions: [],\r\n        };\r\n    },\r\n    computed: {\r\n        unit() {\r\n            return `Unit ${this.unitId}`;\r\n        },\r\n    },\r\n    methods: {\r\n        goTo(path) {\r\n            this.$router.push({ path });\r\n        },\r\n        resetQuestion(question) {\r\n            const options = [\r\n                `A ${question.option_a}`,\r\n                `B ${question.option_b}`,\r\n                `C ${question.option_c}`,\r\n                `D ${question.option_d}`,\r\n            ];\r\n            const countAnswers = this.countAnswers(question);\r\n            return {\r\n                question: question.question,\r\n                answer: question.answer,\r\n                countAnswers,\r\n                options,\r\n            };\r\n        },\r\n        countAnswers(question) {\r\n            const answerCount = {\r\n                A: { count: 0, students: [] },\r\n                B: { count: 0, students: [] },\r\n                C: { count: 0, students: [] },\r\n                D: { count: 0, students: [] },\r\n            };\r\n            question.studentAnswers.forEach((studentAnswer) => {\r\n                const option = studentAnswer.studentOption;\r\n                answerCount[option].count += 1;\r\n                answerCount[option].students.push(studentAnswer.name);\r\n            });\r\n            return answerCount;\r\n        },\r\n        formatQuestions(questions) {\r\n            return questions.map((question) => {\r\n                return this.resetQuestion(question);\r\n            });\r\n        },\r\n        getQuestionRows(questions) {\r\n            return questions.map((question) => {\r\n                const A = question.countAnswers['A'];\r\n                const B = question.countAnswers['B'];\r\n                const C = question.countAnswers['C'];\r\n                const D = question.countAnswers['D'];\r\n                return {\r\n                    columns: ['option', 'count', 'students'],\r\n                    rows: [\r\n                        {\r\n                            option: 'D',\r\n                            count: D.count,\r\n                            students: D.students.join('、'),\r\n                        },\r\n                        {\r\n                            option: 'C',\r\n                            count: C.count,\r\n                            students: C.students.join('、'),\r\n                        },\r\n                        {\r\n                            option: 'B',\r\n                            count: B.count,\r\n                            students: B.students.join('、'),\r\n                        },\r\n                        {\r\n                            option: 'A',\r\n                            count: A.count,\r\n                            students: A.students.join('、'),\r\n                        },\r\n                    ],\r\n                };\r\n            });\r\n        },\r\n    },\r\n    async mounted() {\r\n        this.unitId = this.$route.params.id;\r\n\r\n        const resultRes = await apiExecutor.getQuestionResults(this.unitId);\r\n        const studentRes = await apiExecutor.getAllStudentScores(this.unitId);\r\n\r\n        this.questions = this.formatQuestions(resultRes.questions);\r\n\r\n        this.questionChartDatas = this.getQuestionRows(this.questions);\r\n        this.overallChartData = {\r\n            ...this.overallChartData,\r\n            rows: studentRes,\r\n        };\r\n        this.title = resultRes.unitTitle;\r\n    },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.border-left {\r\n    border-left: 1px solid #efefef;\r\n}\r\n</style>\r\n"]}]}